#!/usr/bin/perl

use strict;
use lib 'lib';
use DJabberd;
use DJabberd::Auth::AllowedUsers;
use DJabberd::Auth::StaticPassword;
use Getopt::Long;

use vars qw($DEBUG);
$DEBUG = 0;

my ($daemonize);

Getopt::Long::GetOptions(
    'd|daemon'       => \$daemonize,
    'debug=i'        => \$DEBUG,
   );

my $server = DJabberd->new(
                           daemonize => $daemonize,
                           auth_hooks => [
                                          DJabberd::Auth::AllowedUsers->new(policy => "deny",
                                                                            allowed => [qw(brad bradfitz bob test)]),
                                          DJabberd::Auth::StaticPassword->new(password => "password"),
                                          #DJabberd::Auth::LiveJournal->new(password => "password"),
                                          ],
#                           roster_hooks => [
#                                            DJabberd::Roster::Mysql->new(host => "127.0.0.1",
#                                                                         db => "djabberd_roster"),
#                                            ],
                           );
$server->run;
